<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Enervi7 v7 Journey Core</title>

<style>
  :root{
    --bg:#0f0c18;
    --panel:#171427;
    --text:#f1ecff;
    --muted:#b8b6c9;
    --brand:#7a3cff;
    --brand-2:#5ee2ff;
    --ok:#36d399;
    --warn:#ffbf5e;
    --danger:#ff6b6b;
  }
  html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI","PingFang TC","Noto Sans TC",Roboto,"Helvetica Neue",Arial,sans-serif;}
  .wrap{max-width:880px;margin:24px auto 80px;padding:0 16px;}
  h1{margin:0 0 8px;font-size:28px;font-weight:800}
  .sub{color:var(--muted);font-size:14px;margin-bottom:18px}

  /* é¢æ¿ */
  .card{background:var(--panel);border-radius:14px;padding:18px 16px;margin:16px 0;box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .row{display:flex;gap:12px;align-items:center}
  .muted{color:var(--muted)}
  .btn{padding:10px 14px;border-radius:10px;border:0;background:var(--brand);color:#fff;font-weight:700;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .btn.secondary{background:#2a2550}
  .tag{font-size:12px;padding:4px 8px;border-radius:999px;background:#2a2550;color:#d8d6f6}

  /* é€²åº¦æ¢ */
  .bar{height:10px;background:#231d3e;border-radius:20px;overflow:hidden}
  .bar > span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--brand),var(--brand-2));transition:width .5s ease}

  /* å‹³ç«  / é–é ­ */
  .badge{width:56px;height:56px;border-radius:50%;display:grid;place-items:center;background:#1d1934;position:relative;box-shadow:inset 0 0 0 2px #2d265a}
  .badge svg{width:26px;height:26px;opacity:.9}
  .badge.locked svg path{fill:#7b78a3}
  .badge.unlocked{animation:pop .5s ease both}
  @keyframes pop{0%{transform:scale(.6)}60%{transform:scale(1.15)}100%{transform:scale(1)}}

  /* è§£é–å…‰æšˆ */
  .badge.unlock::before{
    content:"";position:absolute;inset:-4px;border-radius:inherit;
    background:radial-gradient( circle at 50% 50%, rgba(122,60,255,.55), transparent 60%);
    filter:blur(6px);animation:glow 1.8s ease-in-out 2;
  }
  @keyframes glow{
    0%,100%{opacity:.2;transform:scale(.95)}
    50%{opacity:1;transform:scale(1.05)}
  }

  /* å‹¾é¸ (æ¯æ—¥æ‰“å¡) */
  .check{appearance:none;width:22px;height:22px;border-radius:6px;margin-right:8px;
         border:2px solid #3a3463;background:transparent;cursor:pointer}
  .check:checked{background:var(--ok);border-color:var(--ok)}

  /* å°è©±æ¡† */
  dialog{border:0;border-radius:16px;padding:0;background:#181532;color:var(--text);max-width:520px}
  dialog::backdrop{background:rgba(0,0,0,.55)}
  .dlg-hd{padding:16px 18px;border-bottom:1px solid #2b2650;font-weight:800;display:flex;justify-content:space-between}
  .dlg-bd{padding:16px 18px}
  .dlg-ft{padding:14px 18px;border-top:1px solid #2b2650;text-align:right}
  .x{background:#2a2550;border:0;color:#eae6ff;border-radius:10px;padding:8px 12px;font-weight:700;cursor:pointer}

  /* å°å­— */
  .sm{font-size:13px;color:var(--muted)}

  /* æ—¥æ›†å°åœ“é» */
  .dot{width:8px;height:8px;background:#3a3463;border-radius:50%}
  .dot.on{background:var(--ok)}
</style>
</head>
<body>
<div class="wrap">
  <h1>Enervi7 ï½œæ—…ç¨‹é€²åº¦</h1>
  <div class="sub">æœ¬å€å¡Šï¼š7ï¼21ï¼30 å¤©æ‰“å¡é€²åº¦ï¼‹è§£é–å‹•ç•«ï¼‹æ¯æ—¥åƒ…èƒ½æ‰“å¡ä¸€æ¬¡ï¼ˆåŒæ—¥é‡è¤‡ç„¡æ•ˆï¼‰</div>

  <!-- æ—…ç¨‹é€²åº¦ -->
  <div class="card">
    <h2>ğŸŒ€ æ—…ç¨‹é€²åº¦</h2>

    <div class="card" style="background:#14112a;border-radius:12px">
      <div class="row" style="justify-content:space-between;margin-bottom:8px">
        <div class="row">
          <div class="tag">7 æ—¥èƒ½é‡æŒ‘æˆ°</div>
        </div>
        <div class="muted"><span id="d7">0</span> / 7 å¤©</div>
      </div>
      <div class="bar"><span id="p7"></span></div>
      <div class="row" style="margin-top:12px;justify-content:space-between">
        <label class="row sm"><input class="check" type="checkbox" id="tick7" />å®Œæˆä»Šæ—¥æ‰“å¡</label>
        <div class="badge locked" id="b7" title="è§£é–å¾Œé¡¯ç¤ºå¡ç‰‡">
          <!-- é–é ­ SVG -->
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 2a5 5 0 00-5 5v3H6a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2v-8a2 2 0 00-2-2h-1V7a5 5 0 00-5-5zm0 2a3 3 0 013 3v3H9V7a3 3 0 013-3z" fill="#9a96c7"/></svg>
        </div>
      </div>
    </div>

    <div class="card" style="background:#14112a;border-radius:12px">
      <div class="row" style="justify-content:space-between;margin-bottom:8px">
        <div class="row">
          <div class="tag">21 æ—¥éˆé­‚è½‰åŒ–</div>
        </div>
        <div class="muted"><span id="d21">0</span> / 21 å¤©</div>
      </div>
      <div class="bar"><span id="p21"></span></div>
      <div class="row" style="margin-top:12px;justify-content:space-between">
        <label class="row sm"><input class="check" type="checkbox" id="tick21" />å®Œæˆä»Šæ—¥æ‰“å¡</label>
        <div class="badge locked" id="b21">
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 2a5 5 0 00-5 5v3H6a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2v-8a2 2 0 00-2-2h-1V7a5 5 0 00-5-5z" fill="#9a96c7"/></svg>
        </div>
      </div>
    </div>

    <div class="card" style="background:#14112a;border-radius:12px">
      <div class="row" style="justify-content:space-between;margin-bottom:8px">
        <div class="row">
          <div class="tag">30 æ—¥é¡¯åŒ–æ—¥è¨˜</div>
        </div>
        <div class="muted"><span id="d30">0</span> / 30 å¤©</div>
      </div>
      <div class="bar"><span id="p30"></span></div>
      <div class="row" style="margin-top:12px;justify-content:space-between">
        <label class="row sm"><input class="check" type="checkbox" id="tick30" />å®Œæˆä»Šæ—¥æ‰“å¡</label>
        <div class="badge locked" id="b30">
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 2a5 5 0 00-5 5v3H6a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2v-8a2 2 0 00-2-2h-1V7a5 5 0 00-5-5z" fill="#9a96c7"/></svg>
        </div>
      </div>
    </div>

    <div class="sm" style="margin-top:8px">å°æé†’ï¼šåŒä¸€å¤©åªæœƒè¨˜éŒ„ä¸€æ¬¡æ‰“å¡ï¼›è·¨æ—¥æ‰æœƒç´¯åŠ ã€‚</div>
  </div>
</div>

<!-- è§£é–å½ˆçª— -->
<dialog id="unlockDlg">
  <div class="dlg-hd">
    <div>ğŸƒ éš±è—éˆé­‚å¡</div>
    <button class="x" onclick="unlockDlg.close()">é—œé–‰</button>
  </div>
  <div class="dlg-bd">
    <div id="cardTitle" style="font-weight:800;font-size:18px;margin-bottom:6px"></div>
    <div id="cardText" style="white-space:pre-wrap"></div>
  </div>
  <div class="dlg-ft"><button class="x" onclick="unlockDlg.close()">å¥½çš„</button></div>
</dialog>

<script>
/* =========================
   1) 33 å¼µéš±è—éˆé­‚å¡
   ========================= */
const HIDDEN_CARDS = [
  {t:"ç„¡åä¹‹å…‰", m:"åœ¨ä½ é‚„éœ€è¦åå­—ä¹‹å‰ï¼Œä½ å·²ç¶“æ˜¯å…‰ã€‚\nè¡Œå‹•ï¼šä»Šå¤©ï¼Œéœé»˜ 60 ç§’ï¼Œè®“è‡ªå·±è¢«çœ‹è¦‹ã€‚"},
  {t:"å›åˆ°ä¸­å¿ƒ", m:"ä½ ä¸æ˜¯é¢¨æš´ï¼Œä½ æ˜¯ä¸­å¿ƒã€‚è®“è¬è±¡ç¹ä½ è½‰ï¼Œè€Œä½ å®‰ä½å…¶ä¸­ã€‚"},
  {t:"å…è¨±ç™¼ç”Ÿ", m:"æ”¶èµ·æŒæ§ï¼Œè®“ç”Ÿå‘½èˆ‡ä½ ä¸€èµ·å®Œæˆä»Šå¤©ã€‚\nè¡Œå‹•ï¼šå¯«ä¸‹ 3 å¥ã€æˆ‘å…è¨±â€¦ã€"},
  {t:"å«å…‰è€Œè¡Œ", m:"æº«æŸ”ä¸ç­‰æ–¼é€€è®“ï¼›ä½ æ˜¯å«è‘—å…‰çš„å±±ã€‚"},
  {t:"å›ç­”è‡ªå·±çš„åå­—", m:"ä½ å‘¼å–šäº†èª°ï¼Ÿå…¶å¯¦ä½ åœ¨å‘¼å–šè‡ªå·±ã€‚"},
  {t:"é‚„çµ¦æ™‚é–“", m:"æŠŠæ€¥èºé‚„çµ¦æ™‚é–“ï¼ŒæŠŠæ¸…æ˜é‚„çµ¦è‡ªå·±ã€‚"},
  {t:"çœ‹è¦‹è¶³å¤ ", m:"ä½ å·²ç¶“æ“æœ‰å®Œæˆä»Šå¤©çš„ã€è¶³å¤ ã€ã€‚"},
  {t:"å¾®å°æ­¥", m:"ä¸€ç²’æ²™ä¹Ÿèƒ½æ¨å‹•é¢¨å‘ã€‚\nè¡Œå‹•ï¼š10 åˆ†é˜å®Œæˆä¸€å°æ­¥ã€‚"},
  {t:"å°±åœ¨æ­¤åˆ»", m:"æœ€åˆé©çš„èµ·é»ï¼Œç¸½æ˜¯æ­¤åˆ»ã€‚"},
  {t:"ç…§è¦‹", m:"ä½ ä¸æ˜¯è¢«å®šç¾©ï¼Œä½ æ˜¯æœƒç™¼å…‰çš„ã€è­‰æ“šã€ã€‚"},
  {t:"éˆé­‚å‘¼æ°£", m:"åå‡ºä¸æ˜¯ä½ çš„ï¼Œç©ºå‡ºèƒ½ç››è£çš„ã€‚"},
  {t:"åšä½ çš„æ²³", m:"ä¸èˆ‡æµ·çˆ­ï¼Œå»ç¸½èƒ½æŠµé”æµ·ã€‚"},
  {t:"æ‰¶è‘—å¿ƒ", m:"çµ¦å¿ƒä¸€æŠŠæ¤…å­ï¼Œè®“å®ƒåä¸‹èªªè©±ã€‚"},
  {t:"æŠŠæ„›èªªå®Œ", m:"ä½ ä»¥ç‚ºå¤ªå¤šï¼Œå…¶å¯¦å‰›å¥½ã€‚"},
  {t:"å¸­åœ°è€Œå", m:"åœæ­¢å¥”è·‘ï¼Œåœ°æ¿ä¹Ÿæ˜¯æŠµé”ã€‚"},
  {t:"äº¤é‚„é‡æ“”", m:"ä¸æ˜¯ä½ çš„ï¼Œå°±è®“å®ƒæ­¸ä½ã€‚"},
  {t:"çµ¦å‡ºè«‹æ±‚", m:"å‘å¤–ä¼¸æ‰‹ï¼Œæœ¬èº«å°±æ˜¯å‹‡æ°£ã€‚"},
  {t:"æ…¢ä¸€é»", m:"å¿«æ˜¯æ–¹æ³•ï¼Œæ…¢æ˜¯åŠ›é‡ã€‚"},
  {t:"æ”¶å›ç›®å…‰", m:"ä½ æŠŠä¸–ç•Œçœ‹å¾—å¤ªå¤šï¼Œä»Šå¤©çœ‹å›è‡ªå·±ã€‚"},
  {t:"ä¸€è‡´", m:"å¿ƒã€å£ã€æ‰‹åŒä¸€æ–¹å‘ï¼Œå°±æœƒæœ‰é¢¨ã€‚"},
  {t:"å®‰ç©©", m:"ä½ ä¸æ˜¯å‹‰å¼·è‡ªå·±ï¼Œè€Œæ˜¯é™ªä¼´è‡ªå·±ã€‚"},
  {t:"ç©¿è¶Šå™ªéŸ³", m:"æŠŠã€åˆ¥äººçš„è²éŸ³ã€é—œå°ï¼Œè®“å…§åœ¨æŒ‡å¼•è®Šå¤§ã€‚"},
  {t:"æ›ä½", m:"ç«™åˆ°æ„›çš„ä½ç½®ï¼Œå°±çœ‹è¦‹è·¯ã€‚"},
  {t:"æ²³å£", m:"çµæŸä¸æ˜¯çµ‚é»ï¼Œæ˜¯å¦ä¸€æ®µæµçš„é–‹å§‹ã€‚"},
  {t:"ç¨®å­æ—¥", m:"ä»Šå¤©çš„ä¸€é»é»ï¼Œå°±æ˜¯æ˜å¤©çš„ä¸€æ•´ç‰‡ã€‚"},
  {t:"å…è¨±å–œæ‚…", m:"å¿«æ¨‚ä¸æ˜¯æˆæœï¼Œæ˜¯æ–¹æ³•ã€‚"},
  {t:"æŠŠæ‰‹é¬†é–‹", m:"é¬†é–‹ä¸æ˜¯å¤±å»ï¼Œæ˜¯ç‚ºæ¥ä½åšæº–å‚™ã€‚"},
  {t:"ç‚ºè‡ªå·±ä½œè­‰", m:"å¯«ä¸‹ 3 å€‹ã€æˆ‘åšåˆ°äº†ã€ã€‚"},
  {t:"æ²‰è‘—çš„å¿ƒ", m:"æ…Œåªæ˜¯æš«æ™‚ï¼›æ·±è™•ä¸€ç›´å¾ˆç©©ã€‚"},
  {t:"å…ˆç›¸ä¿¡", m:"ä¸æ˜¯å› ç‚ºçœ‹è¦‹æ‰ç›¸ä¿¡ï¼Œè€Œæ˜¯ç›¸ä¿¡æ‰€ä»¥çœ‹è¦‹ã€‚"},
  {t:"å›å®¶", m:"æ­¸è¿”ï¼Œä¸å¿…é è¡Œã€‚"},
  {t:"åŒè¡Œ", m:"æŠŠä»Šå¤©åˆ†äº«çµ¦ä¸€å€‹äººï¼Œè·¯æœƒè®Šäº®ã€‚"},
  {t:"è¨±å¯", m:"å‡†è¨±è‡ªå·±æ˜¯ç¾åœ¨é€™æ¨£ï¼Œä¸–ç•Œæ‰å¥½å¥½æ„›ä½ ã€‚"}
];

/* =========================
   2) æœ¬åœ°ç‹€æ…‹å„²å­˜
   ========================= */
const LS = {
  get(k, d){ try{ return JSON.parse(localStorage.getItem(k) ?? JSON.stringify(d)); }catch(e){ return d; } },
  set(k, v){ localStorage.setItem(k, JSON.stringify(v)); }
};

// æ—…ç¨‹ key
const KEY = "enervi7_journey_v2";
const todayStr = ()=> new Date().toISOString().slice(0,10);

// è®€å–æˆ–åˆå§‹åŒ–
const state = LS.get(KEY, {
  d7:0, d21:0, d30:0,
  lastCheckinDate:null,
  unlockedIndex:0, // å·²è§£é–è‡³ç¬¬å¹¾å¼µå¡ï¼ˆå°æ‡‰ HIDDEN_CARDSï¼‰
  unlocked7:false, unlocked21:false, unlocked30:false
});

/* =========================
   3) ç¹ªè£½ UI
   ========================= */
function render(){
  // æ•¸å­—
  d7.textContent   = state.d7;
  d21.textContent  = state.d21;
  d30.textContent  = state.d30;

  // é€²åº¦
  p7.style.width   = Math.min(state.d7/7*100, 100) + "%";
  p21.style.width  = Math.min(state.d21/21*100, 100) + "%";
  p30.style.width  = Math.min(state.d30/30*100, 100) + "%";

  // ä»Šæ—¥æ˜¯å¦å·²æ‰“å¡ï¼ˆä¸‰æ¢åŒä¸€å€‹æ—¥æœŸï¼‰
  const done = state.lastCheckinDate === todayStr();
  tick7.checked = done; tick21.checked = done; tick30.checked = done;

  // å‹³ç« é–é ­
  setBadge(b7, state.unlocked7);
  setBadge(b21, state.unlocked21);
  setBadge(b30, state.unlocked30);
}

function setBadge(el, unlocked){
  el.classList.remove("unlock");
  if(unlocked){
    el.classList.remove("locked");
    el.classList.add("unlocked","unlock"); // unlock æœƒè§¸ç™¼å…‰æšˆå‹•ç•«
    // æ›åœ–ç¤ºï¼ˆé–‹é–ï¼‰
    el.innerHTML = `<svg viewBox="0 0 24 24" fill="none">
      <path d="M17 10V7a5 5 0 10-10 0h2a3 3 0 116 0v3h-1a2 2 0 00-2 2v8a2 2 0 002 2h4a2 2 0 002-2v-8a2 2 0 00-2-2h-1z" fill="#c7b6ff"/></svg>`;
  }else{
    el.classList.add("locked");
    el.classList.remove("unlocked");
    el.innerHTML = `<svg viewBox="0 0 24 24" fill="none">
      <path d="M12 2a5 5 0 00-5 5v3H6a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2v-8a2 2 0 00-2-2h-1V7a5 5 0 00-5-5zm0 2a3 3 0 013 3v3H9V7a3 3 0 013-3z" fill="#9a96c7"/></svg>`;
  }
}

/* =========================
   4) æ‰“å¡ï¼ˆæ¯æ—¥åƒ…ä¸€æ¬¡ï¼‰
   ========================= */
function checkinToday(){
  // å·²æ‰“éå¡å°±ä¸å†è¨ˆæ•¸
  if(state.lastCheckinDate === todayStr()){
    // åªæŠŠ UI çš„å‹¾é¸åŒæ­¥ï¼Œä¸åŠ å¤©æ•¸
    tick7.checked = true; tick21.checked = true; tick30.checked = true;
    return;
  }

  state.lastCheckinDate = todayStr();
  // ä¸‰æ¢éƒ½ +1
  state.d7 = Math.min(state.d7+1, 7);
  state.d21 = Math.min(state.d21+1, 21);
  state.d30 = Math.min(state.d30+1, 30);

  // æ˜¯å¦è§£é–
  const unlocks = [];
  if(state.d7 === 7 && !state.unlocked7){ state.unlocked7 = true; unlocks.push("7"); }
  if(state.d21 === 21 && !state.unlocked21){ state.unlocked21 = true; unlocks.push("21"); }
  if(state.d30 === 30 && !state.unlocked30){ state.unlocked30 = true; unlocks.push("30"); }

  // å„²å­˜ + é‡ç¹ª
  LS.set(KEY, state);
  render();

  // è‹¥æœ‰è§£é– â†’ é¡¯ç¤ºå¡ç‰Œï¼ˆæ¯æ¬¡åªé¡¯ç¤ºä¸€å¼µï¼Œè‹¥å¤šå€‹åŒæ™‚è§£é–å°±ä¾åºé¡¯ç¤ºä¸€å¼µï¼‰
  if(unlocks.length){
    showHiddenCard();
  }
}

/* =========================
   5) é¡¯ç¤ºéš±è—å¡ï¼ˆä¾åºå–ç”¨ï¼‰
   ========================= */
function showHiddenCard(){
  const idx = state.unlockedIndex % HIDDEN_CARDS.length;
  const card = HIDDEN_CARDS[idx];
  state.unlockedIndex++;
  LS.set(KEY, state);

  cardTitle.textContent = `${card.t}`;
  cardText.textContent  = card.m;
  unlockDlg.showModal();
}

/* =========================
   6) ç¶å®šä¸‰å€‹ checkbox
   ï¼ˆä»»ä¸€é¡†å‹¾é¸éƒ½è¦–ç‚ºã€ä»Šæ—¥æ‰“å¡ã€ï¼‰
   ========================= */
["tick7","tick21","tick30"].forEach(id=>{
  document.getElementById(id).addEventListener("change", e=>{
    if(e.target.checked) checkinToday(); else render();
  });
});

// åˆæ¬¡æ¸²æŸ“
render();
</script>
</body>
</html>